/* ============================================
   TUI-THEME.CSS - Token Source of Truth
   Jules Theme (OKLCH Colors) + Centralized Assets
   ============================================ */

/* === FONTS === */
@font-face {
  font-family: "VT323";
  src: url("../assets/fonts/VT323-Regular.ttf") format("truetype");
  font-weight: normal;
  font-style: normal;
}

@font-face {
  font-family: "JetBrains Mono";
  src: url("../assets/fonts/JetBrainsMono-Regular.ttf") format("truetype");
  font-weight: normal;
  font-style: normal;
}

:root {
  /* ========================================
     OKLCH COLOR PALETTE (Jules Theme)
     ======================================== */

  /* --- Purple Scale --- */
  --color-purple-50: oklch(94.64% 0.022 302.93);
  --color-purple-100: oklch(88.24% 0.051 301.8);
  --color-purple-200: oklch(77.6% 0.097 300.59);
  --color-purple-300: oklch(65.96% 0.152 299.22);
  --color-purple-400: oklch(54.78% 0.201 296.07);
  --color-purple-500: oklch(46.36% 0.214 293.04);
  --color-purple-600: oklch(39.32% 0.178 292.7);
  --color-purple-700: oklch(32.49% 0.143 293.54);
  --color-purple-800: oklch(25.56% 0.105 294.24);
  --color-purple-900: oklch(17.08% 0.058 297.53);
  --color-purple-950: oklch(13.65% 0.037 300.65);

  /* --- Fuchsia Scale --- */
  --color-fuchsia-50: oklch(95.07% 0.028 338.58);
  --color-fuchsia-100: oklch(89.33% 0.06 339.28);
  --color-fuchsia-200: oklch(79.48% 0.122 342.05);
  --color-fuchsia-300: oklch(70.51% 0.183 343.83);
  --color-fuchsia-400: oklch(63.72% 0.229 346.83);
  --color-fuchsia-500: oklch(58.3% 0.231 349.13);
  --color-fuchsia-600: oklch(48.99% 0.192 348.58);
  --color-fuchsia-800: oklch(30.87% 0.116 348.04);
  --color-fuchsia-950: oklch(14.73% 0.046 344.62);

  /* --- Amber Scale --- */
  --color-amber-50: oklch(98.7% 0.022 95.277);
  --color-amber-200: oklch(92.4% 0.12 95.746);
  --color-amber-300: oklch(87.9% 0.169 91.605);
  --color-amber-400: oklch(82.8% 0.189 84.429);
  --color-amber-500: oklch(76.9% 0.188 70.08);
  --color-amber-950: oklch(27.9% 0.077 45.635);

  /* --- Cyan Scale --- */
  --color-cyan-50: oklch(98.4% 0.019 200.873);
  --color-cyan-200: oklch(91.7% 0.08 205.041);
  --color-cyan-300: oklch(86.5% 0.127 207.078);
  --color-cyan-400: oklch(78.9% 0.154 211.53);
  --color-cyan-500: oklch(71.5% 0.143 215.221);
  --color-cyan-950: oklch(30.2% 0.056 229.695);

  /* ========================================
     SEMANTIC THEME VARIABLES
     ======================================== */

  /* Backgrounds */
  --tui-bg-primary: var(--color-purple-950);
  --tui-bg-panel: var(--color-purple-900);
  --tui-bg-input: var(--color-purple-900);
  --tui-bg-hover: var(--color-purple-800);

  /* Text Colors */
  --tui-text-main: var(--color-purple-50);
  --tui-text-dim: var(--color-purple-200);
  --tui-text-keyword: var(--color-fuchsia-300); /* Pink */

  /* Accent Colors */
  --tui-border: var(--color-purple-500);
  --tui-accent-cyan: var(--color-cyan-400);
  --tui-accent-amber: var(--color-amber-400);
  --tui-accent-emerald: var(--color-cyan-400);
  --tui-accent-rose: var(--color-fuchsia-400);

  /* ========================================
     TYPOGRAPHY
     ======================================== */
  --font-header: "VT323", Consolas, monospace;
  --font-body: "JetBrains Mono", Consolas, monospace;
  --font-mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;

  --text-xs: 0.75rem;
  --text-sm: 0.875rem;
  --text-base: 1rem;
  --text-lg: 1.125rem;
  --text-xl: 1.5rem;
  --text-2xl: 2rem;

  /* ========================================
     SPACING & LAYOUT
     ======================================== */
  --space-1: 0.25rem;
  --space-2: 0.5rem;
  --space-3: 0.75rem;
  --space-4: 1rem;
  --spacing: 0.25rem;

  --border-width: 2px;
  --border-style: solid;
  --radius-md: 0.375rem;
  --radius-lg: 0.5rem;
  --radius-xl: 0.75rem;

  /* ========================================
     EFFECTS
     ======================================== */
  --glow-text: 0 0 5px
    color-mix(in srgb, var(--color-purple-50), transparent 70%);
  --glow-border: 0 0 10px
    color-mix(in srgb, var(--color-purple-500), transparent 60%);
  --transition-speed: 0.2s;
  --ease-in-out: cubic-bezier(0.4, 0, 0.2, 1);

  /* ========================================
     ASSETS (SVG Data URIs)
     ======================================== */

  /* Pattern: Dot Three (Primary Background) */
  --pattern-bg-dot: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.68 30.68"><rect fill="%233a0c81" x="11.58" y="11.48" width="7.72" height="7.72"/><rect fill="%233a0c81" x="3.86" y="3.76" width="7.72" height="7.72"/><rect fill="%233a0c81" x="19.29" y="19.2" width="7.72" height="7.72"/></svg>');

  /* Pattern: Square Light (Detail Background) */
  --pattern-bg-square-light: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 13.78 22.86"><path fill="%23784fcf" d="M1.76,4.02H0.61V2.87h1.15V4.02z M1.76,8.58H0.61V7.44h1.15V8.58z M1.76,13.16H0.61v-1.15h1.15V13.16z M1.76,17.73H0.61v-1.14h1.15V17.73z M1.76,22.3H0.61v-1.15h1.15V22.3z M4.03,1.73H2.88V0.6h1.15V1.73z M4.03,6.31H2.88V5.16h1.15V6.31z M4.03,10.88H2.88V9.73h1.15V10.88z M4.03,15.44H2.88v-1.15h1.15V15.44z M4.03,20.01H2.88v-1.14h1.15V20.01z M6.32,4.02H5.18V2.87h1.14V4.02z M6.32,8.58H5.18V7.44h1.14V8.58z M6.32,13.16H5.18v-1.15h1.14V13.16z M6.32,17.73H5.18v-1.14h1.14V17.73z M6.32,22.3H5.18v-1.15h1.14V22.3z M8.6,1.73H7.47V0.6H8.6V1.73z M8.6,6.31H7.47V5.16H8.6V6.31z M8.6,10.88H7.47V9.73H8.6V10.88z M8.6,15.44H7.47v-1.15H8.6V15.44z M8.6,20.01H7.47v-1.14H8.6V20.01z M10.89,4.02H9.74V2.87h1.15V4.02z M10.89,8.58H9.74V7.44h1.15V8.58z M10.89,13.16H9.74v-1.15h1.15V13.16z M10.89,17.73H9.74v-1.14h1.15V17.73z M10.89,22.3H9.74v-1.15h1.15V22.3z M13.18,1.73h-1.15V0.6h1.15V1.73z M13.18,6.31h-1.15V5.16h1.15V6.31z M13.18,10.88h-1.15V9.73h1.15V10.88z M13.18,15.44h-1.15v-1.15h1.15V15.44z M13.18,20.01h-1.15v-1.14h1.15V20.01z"/></svg>');

  /* Pattern: Tentacle (Decoration) */
  --pattern-bg-tentacle: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAKAQMAAABhWYebAAAABlBMVEUAAABVKqx/G3Z/AAAAAXRSTlMAQObYZgAAACtJREFUCNdj+M/AwfC/QYLh/zELhv/PKhj+//8BxsZAbAjEDP8/MDDUPwAAjukUhWE2d64AAAAASUVORK5CYII=");

  /* Pattern: Header Dark (layout.css) */
  --pattern-bg-header: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.68 30.68"><rect fill="%232a0a5e" x="11.58" y="11.48" width="7.72" height="7.72"/><rect fill="%232a0a5e" x="3.86" y="3.76" width="7.72" height="7.72"/><rect fill="%232a0a5e" x="19.29" y="19.2" width="7.72" height="7.72"/></svg>');

  /* Pattern: Widget Panel (widgets.css) */
  --pattern-bg-widget: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.68 30.68"><rect fill="%231a0540" x="11.58" y="11.48" width="7.72" height="7.72"/><rect fill="%231a0540" x="3.86" y="3.76" width="7.72" height="7.72"/><rect fill="%231a0540" x="19.29" y="19.2" width="7.72" height="7.72"/></svg>');

  /* Pattern: Modal Border Purple (Default) */
  --pattern-border-modal-purple: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 13.78 22.86"><path fill="%23784fcf" d="M1.76,4.02H0.61V2.87h1.15V4.02z M1.76,8.58H0.61V7.44h1.15V8.58z M1.76,13.16H0.61v-1.15h1.15V13.16z M1.76,17.73H0.61v-1.14h1.15V17.73z M1.76,22.3H0.61v-1.15h1.15V22.3z M4.03,1.73H2.88V0.6h1.15V1.73z M4.03,6.31H2.88V5.16h1.15V6.31z M4.03,10.88H2.88V9.73h1.15V10.88z M4.03,15.44H2.88v-1.15h1.15V15.44z M4.03,20.01H2.88v-1.14h1.15V20.01z M6.32,4.02H5.18V2.87h1.14V4.02z M6.32,8.58H5.18V7.44h1.14V8.58z M6.32,13.16H5.18v-1.15h1.14V13.16z M6.32,17.73H5.18v-1.14h1.14V17.73z M6.32,22.3H5.18v-1.15h1.14V22.3z M8.6,1.73H7.47V0.6H8.6V1.73z M8.6,6.31H7.47V5.16H8.6V6.31z M8.6,10.88H7.47V9.73H8.6V10.88z M8.6,15.44H7.47v-1.15H8.6V15.44z M8.6,20.01H7.47v-1.14H8.6V20.01z M10.89,4.02H9.74V2.87h1.15V4.02z M10.89,8.58H9.74V7.44h1.15V8.58z M10.89,13.16H9.74v-1.15h1.15V13.16z M10.89,17.73H9.74v-1.14h1.15V17.73z M10.89,22.3H9.74v-1.15h1.15V22.3z M13.18,1.73h-1.15V0.6h1.15V1.73z M13.18,6.31h-1.15V5.16h1.15V6.31z M13.18,10.88h-1.15V9.73h1.15V10.88z M13.18,15.44h-1.15v-1.15h1.15V15.44z M13.18,20.01h-1.15v-1.14h1.15V20.01z"/></svg>');

  /* Pattern: Modal Border Fuchsia */
  --pattern-border-modal-fuchsia: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 13.78 22.86"><path fill="%23c026d3" d="M1.76,4.02H0.61V2.87h1.15V4.02z M1.76,8.58H0.61V7.44h1.15V8.58z M1.76,13.16H0.61v-1.15h1.15V13.16z M1.76,17.73H0.61v-1.14h1.15V17.73z M1.76,22.3H0.61v-1.15h1.15V22.3z M4.03,1.73H2.88V0.6h1.15V1.73z M4.03,6.31H2.88V5.16h1.15V6.31z M4.03,10.88H2.88V9.73h1.15V10.88z M4.03,15.44H2.88v-1.15h1.15V15.44z M4.03,20.01H2.88v-1.14h1.15V20.01z M6.32,4.02H5.18V2.87h1.14V4.02z M6.32,8.58H5.18V7.44h1.14V8.58z M6.32,13.16H5.18v-1.15h1.14V13.16z M6.32,17.73H5.18v-1.14h1.14V17.73z M6.32,22.3H5.18v-1.15h1.14V22.3z M8.6,1.73H7.47V0.6H8.6V1.73z M8.6,6.31H7.47V5.16H8.6V6.31z M8.6,10.88H7.47V9.73H8.6V10.88z M8.6,15.44H7.47v-1.15H8.6V15.44z M8.6,20.01H7.47v-1.14H8.6V20.01z M10.89,4.02H9.74V2.87h1.15V4.02z M10.89,8.58H9.74V7.44h1.15V8.58z M10.89,13.16H9.74v-1.15h1.15V13.16z M10.89,17.73H9.74v-1.14h1.15V17.73z M10.89,22.3H9.74v-1.15h1.15V22.3z M13.18,1.73h-1.15V0.6h1.15V1.73z M13.18,6.31h-1.15V5.16h1.15V6.31z M13.18,10.88h-1.15V9.73h1.15V10.88z M13.18,15.44h-1.15v-1.15h1.15V15.44z M13.18,20.01h-1.15v-1.14h1.15V20.01z"/></svg>');

  /* Pattern: Modal Border Cyan */
  --pattern-border-modal-cyan: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 13.78 22.86"><path fill="%2306b6d4" d="M1.76,4.02H0.61V2.87h1.15V4.02z M1.76,8.58H0.61V7.44h1.15V8.58z M1.76,13.16H0.61v-1.15h1.15V13.16z M1.76,17.73H0.61v-1.14h1.15V17.73z M1.76,22.3H0.61v-1.15h1.15V22.3z M4.03,1.73H2.88V0.6h1.15V1.73z M4.03,6.31H2.88V5.16h1.15V6.31z M4.03,10.88H2.88V9.73h1.15V10.88z M4.03,15.44H2.88v-1.15h1.15V15.44z M4.03,20.01H2.88v-1.14h1.15V20.01z M6.32,4.02H5.18V2.87h1.14V4.02z M6.32,8.58H5.18V7.44h1.14V8.58z M6.32,13.16H5.18v-1.15h1.14V13.16z M6.32,17.73H5.18v-1.14h1.14V17.73z M6.32,22.3H5.18v-1.15h1.14V22.3z M8.6,1.73H7.47V0.6H8.6V1.73z M8.6,6.31H7.47V5.16H8.6V6.31z M8.6,10.88H7.47V9.73H8.6V10.88z M8.6,15.44H7.47v-1.15H8.6V15.44z M8.6,20.01H7.47v-1.14H8.6V20.01z M10.89,4.02H9.74V2.87h1.15V4.02z M10.89,8.58H9.74V7.44h1.15V8.58z M10.89,13.16H9.74v-1.15h1.15V13.16z M10.89,17.73H9.74v-1.14h1.15V17.73z M10.89,22.3H9.74v-1.15h1.15V22.3z M13.18,1.73h-1.15V0.6h1.15V1.73z M13.18,6.31h-1.15V5.16h1.15V6.31z M13.18,10.88h-1.15V9.73h1.15V10.88z M13.18,15.44h-1.15v-1.15h1.15V15.44z M13.18,20.01h-1.15v-1.14h1.15V20.01z"/></svg>');

  /* Pattern: Modal Border Amber */
  --pattern-border-modal-amber: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 13.78 22.86"><path fill="%23f59e0b" d="M1.76,4.02H0.61V2.87h1.15V4.02z M1.76,8.58H0.61V7.44h1.15V8.58z M1.76,13.16H0.61v-1.15h1.15V13.16z M1.76,17.73H0.61v-1.14h1.15V17.73z M1.76,22.3H0.61v-1.15h1.15V22.3z M4.03,1.73H2.88V0.6h1.15V1.73z M4.03,6.31H2.88V5.16h1.15V6.31z M4.03,10.88H2.88V9.73h1.15V10.88z M4.03,15.44H2.88v-1.15h1.15V15.44z M4.03,20.01H2.88v-1.14h1.15V20.01z M6.32,4.02H5.18V2.87h1.14V4.02z M6.32,8.58H5.18V7.44h1.14V8.58z M6.32,13.16H5.18v-1.15h1.14V13.16z M6.32,17.73H5.18v-1.14h1.14V17.73z M6.32,22.3H5.18v-1.15h1.14V22.3z M8.6,1.73H7.47V0.6H8.6V1.73z M8.6,6.31H7.47V5.16H8.6V6.31z M8.6,10.88H7.47V9.73H8.6V10.88z M8.6,15.44H7.47v-1.15H8.6V15.44z M8.6,20.01H7.47v-1.14H8.6V20.01z M10.89,4.02H9.74V2.87h1.15V4.02z M10.89,8.58H9.74V7.44h1.15V8.58z M10.89,13.16H9.74v-1.15h1.15V13.16z M10.89,17.73H9.74v-1.14h1.15V17.73z M10.89,22.3H9.74v-1.15h1.15V22.3z M13.18,1.73h-1.15V0.6h1.15V1.73z M13.18,6.31h-1.15V5.16h1.15V6.31z M13.18,10.88h-1.15V9.73h1.15V10.88z M13.18,15.44h-1.15v-1.15h1.15V15.44z M13.18,20.01h-1.15v-1.14h1.15V20.01z"/></svg>');
}

/* === THEME DROPDOWN === */
.theme-dropdown {
  position: relative;
}
.theme-trigger {
  background: none;
  border: var(--border-width) solid var(--tui-border);
  color: var(--tui-accent-cyan);
  font-family: var(--font-body);
  font-size: var(--text-sm);
  padding: var(--space-1) var(--space-2);
  cursor: pointer;
  transition: background var(--transition-speed) var(--ease-in-out);
}
.theme-trigger:hover {
  background: var(--tui-bg-hover);
}
.theme-menu {
  position: absolute;
  top: 100%;
  right: 0;
  background: var(--tui-bg-panel);
  border: var(--border-width) solid var(--tui-border);
  list-style: none;
  margin: var(--space-1) 0 0;
  padding: 0;
  min-width: 100px;
  z-index: 100;
}
.theme-menu li {
  padding: var(--space-1) var(--space-2);
  cursor: pointer;
  font-size: var(--text-sm);
  transition: background var(--transition-speed) var(--ease-in-out);
}
.theme-menu li:hover {
  background: var(--tui-bg-hover);
}
.theme-menu li.active {
  color: var(--tui-accent-cyan);
}
.hidden {
  display: none !important;
}

/* ============================================
   LIGHT THEME
   Override semantic variables for light mode
   ============================================ */

[data-theme="light"] {
  /* Backgrounds - đảo ngược từ tối sang sáng */
  --tui-bg-primary: var(--color-purple-50);
  --tui-bg-panel: var(--color-purple-100);
  --tui-bg-input: var(--color-purple-200);
  --tui-bg-hover: var(--color-purple-300);

  /* Text Colors - đảo ngược từ sáng sang tối */
  --tui-text-main: var(--color-purple-900);
  --tui-text-dim: var(--color-purple-700);
  --tui-text-keyword: var(--color-fuchsia-600);

  /* Border - đậm hơn cho contrast */
  --tui-border: var(--color-purple-400);

  /* Effects - điều chỉnh cho nền sáng */
  --glow-text: 0 0 5px
    color-mix(in srgb, var(--color-purple-500), transparent 85%);
  --glow-border: 0 0 10px
    color-mix(in srgb, var(--color-purple-400), transparent 75%);

  /* Pattern: Dot Three (Light version) */
  --pattern-bg-dot: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.68 30.68"><rect fill="%23e9d5ff" x="11.58" y="11.48" width="7.72" height="7.72"/><rect fill="%23e9d5ff" x="3.86" y="3.76" width="7.72" height="7.72"/><rect fill="%23e9d5ff" x="19.29" y="19.2" width="7.72" height="7.72"/></svg>');

  /* Pattern: Header (Light version) */
  --pattern-bg-header: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.68 30.68"><rect fill="%23d8b4fe" x="11.58" y="11.48" width="7.72" height="7.72"/><rect fill="%23d8b4fe" x="3.86" y="3.76" width="7.72" height="7.72"/><rect fill="%23d8b4fe" x="19.29" y="19.2" width="7.72" height="7.72"/></svg>');

  /* Pattern: Widget Panel (Light version) */
  --pattern-bg-widget: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.68 30.68"><rect fill="%23f3e8ff" x="11.58" y="11.48" width="7.72" height="7.72"/><rect fill="%23f3e8ff" x="3.86" y="3.76" width="7.72" height="7.72"/><rect fill="%23f3e8ff" x="19.29" y="19.2" width="7.72" height="7.72"/></svg>');
}

/* ============================================
   COLORFUL THEME
   Vibrant multi-color experience
   ============================================ */

[data-theme="colorful"] {
  /* Backgrounds - Cyan tối làm nền */
  --tui-bg-primary: var(--color-cyan-950);
  --tui-bg-panel: var(--color-purple-900);
  --tui-bg-input: var(--color-fuchsia-800);
  --tui-bg-hover: var(--color-amber-950);

  /* Text Colors - Amber/Cyan cho contrast */
  --tui-text-main: var(--color-amber-200);
  --tui-text-dim: var(--color-cyan-300);
  --tui-text-keyword: var(--color-fuchsia-300);

  /* Border - Gradient rainbow feel */
  --tui-border: var(--color-cyan-400);

  /* Accents - Đa sắc */
  --tui-accent-cyan: var(--color-fuchsia-400);
  --tui-accent-amber: var(--color-cyan-400);
  --tui-accent-emerald: var(--color-amber-400);
  --tui-accent-rose: var(--color-purple-400);

  /* Effects */
  --glow-text: 0 0 8px
    color-mix(in srgb, var(--color-amber-400), transparent 60%);
  --glow-border: 0 0 15px
    color-mix(in srgb, var(--color-cyan-400), transparent 50%);

  /* Pattern: Colorful dots */
  --pattern-bg-dot: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.68 30.68"><rect fill="%2306b6d4" x="11.58" y="11.48" width="7.72" height="7.72"/><rect fill="%23f59e0b" x="3.86" y="3.76" width="7.72" height="7.72"/><rect fill="%23c026d3" x="19.29" y="19.2" width="7.72" height="7.72"/></svg>');

  --pattern-bg-header: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.68 30.68"><rect fill="%230891b2" x="11.58" y="11.48" width="7.72" height="7.72"/><rect fill="%23d97706" x="3.86" y="3.76" width="7.72" height="7.72"/><rect fill="%23a21caf" x="19.29" y="19.2" width="7.72" height="7.72"/></svg>');

  --pattern-bg-widget: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.68 30.68"><rect fill="%23164e63" x="11.58" y="11.48" width="7.72" height="7.72"/><rect fill="%2378350f" x="3.86" y="3.76" width="7.72" height="7.72"/><rect fill="%2386198f" x="19.29" y="19.2" width="7.72" height="7.72"/></svg>');
}
